import{l as _,m as T,o as U,j as e,s as O,q as P,n as k,N as R,f as b,e as B,r as u,u as z}from"./index-CRMG5bzS.js";import{u as L,U as w}from"./useMember-CGHURifS.js";import{C as M,a as E,T as q}from"./trending-up-down-DloR7GsE.js";import{u as D,B as y,F as x}from"./use-form-control-CQKzOfDr.js";import{F as f}from"./form-label-DNixU9Oj.js";import{I as j}from"./input-BfnAPdur.js";import{S as N}from"./select-C_HCPDtk.js";import{M as $,a as H,b as V,c as Z,d as G,e as J}from"./modal-overlay-DqBh97wO.js";import{M as W}from"./modal-footer-CYNbZFBh.js";import"./fade-BWbPEriw.js";const[Y,K]=O({name:"FormErrorStylesContext",errorMessage:`useFormErrorStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormError />" `}),v=_((l,a)=>{const o=T("FormError",l),c=U(l),d=D();return d?.isInvalid?e.jsx(Y,{value:o,children:e.jsx(P.div,{...d?.getErrorMessageProps(c,a),className:k("chakra-form__error-message",l.className),__css:{display:"flex",alignItems:"center",...o.text}})}):null});v.displayName="FormErrorMessage";const Q=_((l,a)=>{const o=K();if(!D()?.isInvalid)return null;const d=k("chakra-form__error-icon",l.className);return e.jsx(R,{ref:a,"aria-hidden":!0,...l,__css:o.icon,className:d,children:e.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})});Q.displayName="FormErrorIcon";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],I=b("badge-check",X);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5",key:"1dkoa9"}],["path",{d:"M12 10v4h4",key:"1czhmt"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5",key:"lvuxfi"}],["path",{d:"M22 22v-4h-4",key:"1ewp4q"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5",key:"14ync0"}]],F=b("folder-sync",ee);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],re=b("wifi",se),te=async(l={})=>{try{const{page:a=1,limit:o=10,search:c="",sortBy:d="created_at",sortOrder:r="desc",role:m,status:t,createdAfter:g,createdBefore:i}=l;return(await B.get("/api/users",{params:{page:a,limit:o,search:c,sortBy:d,sortOrder:r,...m&&{role:m},...t&&{status:t},...g&&{createdAfter:g},...i&&{createdBefore:i}}})).data}catch(a){throw console.error("Error fetching users:",a),a}},ae=()=>{const[l,a]=u.useState([]),[o,c]=u.useState(!1),[d,r]=u.useState(null),[m,t]=u.useState({page:1,limit:10,total:0,totalPages:0});return{users:l,loading:o,error:d,pagination:m,loadUsers:async(i={})=>{c(!0),r(null);try{const n=await te({page:i.page?.toString(),limit:i.limit?.toString(),search:i.search,sortBy:i.sortBy,sortOrder:i.sortOrder,role:i.role,status:i.status,createdAfter:i.createdAfter,createdBefore:i.createdBefore});a(n.users),t({page:n.pagination.currentPage,limit:10,total:n.pagination.totalUsers,totalPages:n.pagination.totalPages})}catch(n){r(n instanceof Error?n.message:"An error occurred"),console.error("Failed to load users:",n)}finally{c(!1)}}}};function ne({onAddAdmin:l,onCreateAccountClick:a}){const{users:o,loading:c,loadUsers:d}=ae(),{members:r,loadMembers:m}=L();u.useEffect(()=>{m(),d()},[]);const t=o.filter(s=>["ADMIN","SUPER_ADMIN"].includes(s.role)).length,g=o.filter(s=>["ADMIN","SUPER_ADMIN"].includes(s.role)&&s.status==="ACTIVE").length,i=[{id:1,title:"Total Number of Admins",icon:w,count:c?"...":t.toString(),color:"#8280FF",percentage:"0%"},{id:2,title:"Active Admins",icon:re,count:c?"...":g.toString(),color:"#FEC53D",percentage:"0%"},{id:3,title:"+ Add Admin",icon:F,color:"#00B69B"},{id:4,title:"+ Create Account",icon:F,color:"#00B69B"},{id:5,title:"Total Number of Accounts",icon:w,count:r.length,color:"#8280FF"}],n=s=>[3,4].includes(s),A=s=>{s===3&&l?l():s===4&&a&&a()};return c?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 w-full",children:[1,2,3,4,5].map(s=>e.jsx(M,{children:e.jsx(E,{children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-4"}),!n(s)&&e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"})]})})},s))}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 w-full",children:i.map((s,p)=>{const h=n(s.id);return e.jsx(M,{className:`w-full ${h?"special-card cursor-pointer":""}`,borderColor:"gray.200",onClick:()=>h&&A(s.id),_hover:h?{transform:"translateY(-2px)",shadow:"md"}:void 0,children:e.jsxs(E,{children:[e.jsxs("div",{className:"flex justify-between items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${h?"text-xl font-bold text-[#00B69B]":"text-gray-600"}`,children:s.title}),e.jsx("p",{className:`text-2xl font-bold ${h?"text-blue-600":""}`,children:s.count})]}),e.jsx("div",{className:`p-2 rounded-full ${h?"p-3":""}`,style:{background:s.color},children:e.jsx(s.icon,{size:h?24:20,color:"white"})})]}),h?e.jsx("p",{className:"pt-4 text-xs",children:s.id===3?"Help customers with complaints and questions":"Manage account settings and configurations"}):e.jsxs("p",{className:"flex items-center gap-2 pt-4 text-sm text-gray-500",children:[e.jsx(q,{size:16,color:"#38A169"}),e.jsxs("span",{children:[s.percentage," Up from yesterday"]})]})]})},p)})})}const le=[{value:"IT",label:"IT"},{value:"ACCOUNT",label:"ACCOUNT"},{value:"ARCHIVE",label:"ARCHIVE"},{value:"LEGAL",label:"LEGAL"},{value:"OPERATION",label:"OPERATION"},{value:"CUSTOMER_CARE",label:"CUSTOMER CARE"}];function oe(){const[l,a]=u.useState(!1),o=z(),[c,d]=u.useState(!1),[r,m]=u.useState({}),[t,g]=u.useState({full_name:"",department:"",email:"",password:"",role:""}),i=()=>{const s={};return t.full_name.trim()||(s.full_name="Full name is required"),t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(s.email="Invalid email format"):s.email="Email is required",t.password?t.password.length<8&&(s.password="Password must be at least 8 characters"):s.password="Password is required",t.role||(s.role="Role is required"),t.department||(s.department="Department is required"),m(s),Object.keys(s).length===0},n=s=>{const{name:p,value:h}=s.target;g(C=>({...C,[p]:h})),r[p]&&m(C=>{const S={...C};return delete S[p],S})},A=async s=>{if(s.preventDefault(),!!i()){d(!0);try{await B.post("/api/auth/user/register",t),a(!0),o({title:"Registration Successful",status:"success"})}catch(p){console.error(p),o({title:"Registration Failed",description:p.response?.data?.message||"An error occurred",status:"error"})}finally{d(!1)}}};return l?e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-4 w-full md:w-[40vw] py-16 mt-14 shadow-2xl rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(I,{className:"h-10 w-10 text-green-600"})}),e.jsx("p",{className:"text-2xl font-bold pt-6 text-center",children:"Admin Successfully Added"}),e.jsx(y,{bg:"#2D9CDB",color:"white",_hover:{bg:"#1e8cc4"},onClick:()=>window.location.reload(),mt:4,children:"Continue"})]})}):e.jsx("form",{onSubmit:A,children:e.jsxs("div",{className:"mt-8 bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-[#982323]",children:e.jsx("p",{className:"text-white p-4 font-bold",children:"Create Admin"})}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(x,{isInvalid:!!r.full_name,className:"mb-4",children:[e.jsx(f,{fontSize:13,children:"Full Name"}),e.jsx(j,{name:"full_name",value:t.full_name,onChange:n,variant:"filled",fontSize:13,placeholder:"John Doe"}),e.jsx(v,{children:r.full_name})]}),e.jsxs(x,{isInvalid:!!r.email,className:"mb-4",children:[e.jsx(f,{fontSize:13,children:"Email Address"}),e.jsx(j,{name:"email",type:"email",value:t.email,onChange:n,variant:"filled",fontSize:13,placeholder:"john@example.com"}),e.jsx(v,{children:r.email})]}),e.jsxs(x,{isInvalid:!!r.password,className:"mb-4",children:[e.jsx(f,{fontSize:13,children:"Password"}),e.jsx(j,{name:"password",type:"password",value:t.password,onChange:n,variant:"filled",fontSize:13,placeholder:"At least 8 characters"}),e.jsx(v,{children:r.password})]}),e.jsxs(x,{isInvalid:!!r.role,className:"mb-4",children:[e.jsx(f,{fontSize:13,children:"Role"}),e.jsxs(N,{name:"role",value:t.role,onChange:n,variant:"filled",placeholder:"Select role",children:[e.jsx("option",{value:"ADMIN",children:"Admin"}),e.jsx("option",{value:"STAFF",children:"Staff"})]}),e.jsx(v,{children:r.role})]}),e.jsxs(x,{isInvalid:!!r.department,className:"mb-4",children:[e.jsx(f,{fontSize:13,children:"Department"}),e.jsx(N,{name:"department",value:t.department,onChange:n,variant:"filled",placeholder:"Select department",children:le.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx(v,{children:r.department})]})]}),e.jsx("div",{className:"flex justify-end p-6 border-t",children:e.jsx(y,{type:"submit",className:"flex gap-3",bg:"#982323",color:"white",_hover:{bg:"#556308"},isLoading:c,loadingText:"Submitting...",rightIcon:e.jsx(I,{}),children:"Create Admin"})})]})})}const je=()=>{const[l,a]=u.useState(!1),[o,c]=u.useState(!1),d=()=>{c(!0)},r=()=>{a(!0)},m=()=>{a(!1)};return o?e.jsx(oe,{}):e.jsxs("div",{children:[e.jsx(ne,{onAddAdmin:d,onCreateAccountClick:r}),e.jsxs($,{isOpen:l,onClose:m,children:[e.jsx(H,{}),e.jsxs(V,{children:[e.jsx(Z,{children:"Create Account Management"}),e.jsx(G,{}),e.jsxs(J,{className:"flex flex-col gap-4",children:[e.jsxs(x,{children:[e.jsx(f,{children:"Management Account Name"}),e.jsx(j,{type:"text"})]}),e.jsxs(x,{children:[e.jsx(f,{children:"Management Account Number"}),e.jsx(j,{type:"text"})]}),e.jsxs(x,{children:[e.jsx(f,{children:"Account Description"}),e.jsx(j,{type:"text"})]}),e.jsxs(x,{children:[e.jsx(f,{children:"Account Type"}),e.jsxs(N,{children:[e.jsx("option",{value:"savings",children:"Savings"}),e.jsx("option",{value:"current",children:"Current"})]})]}),e.jsxs(x,{children:[e.jsx(f,{children:"Account Balance"}),e.jsx(j,{type:"text"})]})]}),e.jsxs(W,{children:[e.jsx(y,{colorScheme:"red",mr:3,onClick:m,children:"Cancel"}),e.jsx(y,{colorScheme:"blue",onClick:m,children:"Submit"})]})]})]})]})};export{je as default};
