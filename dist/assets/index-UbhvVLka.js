import{u as S,r as s,j as t,e as q}from"./index-CRMG5bzS.js";import{D as w}from"./index-D2SIzbjx.js";import{F as C}from"./file-text-jj6b-FYb.js";import{H as u}from"./text-DC-W0PyF.js";import{I as h}from"./input-BfnAPdur.js";import{B as I}from"./use-form-control-CQKzOfDr.js";import{D as k}from"./download-CcwuIIIl.js";import{B as P}from"./badge-DiIJR_EX.js";import"./fade-BWbPEriw.js";import"./select-C_HCPDtk.js";import"./key-BWXZw050.js";import"./children-aMr2zYAb.js";const $=()=>{const f=S(),[g,m]=s.useState(!1),[r,p]=s.useState([]),[D,i]=s.useState([]),[n,j]=s.useState(""),[o,b]=s.useState(""),[l,x]=s.useState({page:1,limit:10,total:0}),F=[{name:"All Requests",value:r?.length||0,color:"#1E17DB",bg:"#8280FF"},{name:"Approved Requests",value:r?.filter(e=>e.status==="APPROVED")?.length||0,color:"#A6039F",bg:"#FFDDFD"},{name:"Pending Requests",value:r?.filter(e=>e.status==="PENDING")?.length||0,color:"#FEC53D",bg:"#FFDDFD"},{name:"Rejected Requests",value:r?.filter(e=>e.status==="REJECTED")?.length||0,color:"red",bg:"#FFCCCB"}],y=[{title:"Name",dataIndex:"member",key:"name",width:70,render:e=>t.jsxs("span",{className:"font-semibold",children:[e.first_name," ",e.last_name]})},{title:"Email",dataIndex:"email",key:"email",render:e=>t.jsx("a",{href:`mailto:${e}`,className:"text-blue-500 hover:underline",children:e})},{title:"Phone Number",dataIndex:"phone",key:"phoneNumber"},{title:"Reason",dataIndex:"reason",key:"reason"},{title:"Date",dataIndex:"createdAt",key:"date",render:e=>new Date(e).toLocaleDateString()},{title:"Status",dataIndex:"status",key:"status",render:e=>t.jsx(P,{colorScheme:e==="APPROVED"?"green":e==="PENDING"?"yellow":"red",px:3,py:1,borderRadius:"full",textTransform:"capitalize",children:e})}],N=async()=>{m(!0);try{const e={page:l.page,limit:l.limit,...n&&o&&{startDate:n,endDate:o}},a=await q.get("/api/requests",{params:e}),d=a.data.data||[];p(d),i(a.data.data),x(c=>({...c,total:a.data.total||0}))}catch{f({title:"Error",description:"Failed to fetch requests",status:"error"}),p([]),i([])}finally{m(!1)}},v=()=>{if(!n||!o){i(r);return}const e=r?.filter(a=>{const d=new Date(a.createdAt),c=new Date(n),R=new Date(o);return d>=c&&d<=R});i(e||[])},E=e=>{x(a=>({...a,page:e.current,limit:e.pageSize}))};return s.useEffect(()=>{N()},[l.page,l.limit]),s.useEffect(()=>{v()},[n,o,r]),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex justify-between gap-4",children:F.map((e,a)=>t.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg cursor-pointer w-full",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("p",{className:"font-semibold text-lg",children:e.name}),t.jsx("div",{className:"rounded-full p-2",style:{background:e.bg},children:t.jsx(C,{size:15,color:e.color})})]}),t.jsx("p",{className:"font-bold text-3xl pt-7",children:e.value})]},a))}),t.jsxs(u,{spacing:4,mb:4,justifyContent:"space-between",children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsxs(u,{children:[t.jsx("label",{className:"text-xs",htmlFor:"",children:"From"}),t.jsx(h,{type:"date",value:n,onChange:e=>j(e.target.value),placeholder:"Start Date",size:"xs"})]}),t.jsxs(u,{children:[t.jsx("label",{className:"text-xs",htmlFor:"",children:"To"}),t.jsx(h,{type:"date",value:o,onChange:e=>b(e.target.value),placeholder:"End Date",size:"xs"})]})]}),t.jsx(I,{variant:"outline",size:"xs",colorScheme:"blue",children:t.jsx(k,{size:18})})]}),t.jsx(w,{data:D||[],columns:y,rowKey:"id",showExport:!1,showFilters:!0,tableHeaderBg:"#F1F4F9",tableHeaderColor:"black",loading:g,pagination:{current:l.page,pageSize:l.limit,total:l.total},onChange:E})]})};export{$ as default};
