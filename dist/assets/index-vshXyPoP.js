import{f as S,u as T,r as s,j as t,e as k}from"./index-CRMG5bzS.js";import{D as C}from"./index-D2SIzbjx.js";import{H as m}from"./text-DC-W0PyF.js";import{I as f}from"./input-BfnAPdur.js";import{B as z}from"./use-form-control-CQKzOfDr.js";import{D as I}from"./download-CcwuIIIl.js";import{B as P}from"./badge-DiIJR_EX.js";import"./fade-BWbPEriw.js";import"./select-C_HCPDtk.js";import"./key-BWXZw050.js";import"./children-aMr2zYAb.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],B=S("user-x",A),U=()=>{const g=T(),[h,u]=s.useState(!1),[n,x]=s.useState([]),[y,l]=s.useState([]),[i,D]=s.useState(""),[o,j]=s.useState(""),[r,p]=s.useState({page:1,limit:10,total:0}),b=[{name:"All Terminations",value:n?.length||0,color:"#1E17DB",bg:"#8280FF"},{name:"Approved Terminations",value:n?.filter(e=>e.status==="APPROVED")?.length||0,color:"#A6039F",bg:"#FFDDFD"},{name:"Pending Terminations",value:n?.filter(e=>e.status==="PENDING")?.length||0,color:"#FEC53D",bg:"#FFDDFD"},{name:"Rejected Terminations",value:n?.filter(e=>e.status==="REJECTED")?.length||0,color:"red",bg:"#FFCCCB"}],v=[{title:"Name",dataIndex:"member",key:"name",width:70,render:e=>t.jsxs("span",{className:"font-semibold",children:[e.first_name," ",e.last_name]})},{title:"Service Number",dataIndex:"member",key:"serviceNumber",render:e=>t.jsx("span",{className:"font-mono text-sm",children:e.service_number})},{title:"Reason",dataIndex:"reason",key:"reason",render:e=>t.jsx("div",{className:"max-w-xs truncate",title:e,children:e})},{title:"Date",dataIndex:"createdAt",key:"date",render:e=>new Date(e).toLocaleDateString()},{title:"Status",dataIndex:"status",key:"status",render:e=>t.jsx(P,{colorScheme:e==="APPROVED"?"green":e==="PENDING"?"yellow":"red",px:3,py:1,borderRadius:"full",textTransform:"capitalize",children:e})}],F=async()=>{u(!0);try{const e={page:r.page,limit:r.limit,...i&&o&&{startDate:i,endDate:o}},a=await k.get("/api/termination",{params:e}),c=a.data.data||[];x(c),l(a.data.data),p(d=>({...d,total:a.data.total||0}))}catch{g({title:"Error",description:"Failed to fetch termination requests",status:"error"}),x([]),l([])}finally{u(!1)}},N=()=>{if(!i||!o){l(n);return}const e=n?.filter(a=>{const c=new Date(a.createdAt),d=new Date(i),E=new Date(o);return c>=d&&c<=E});l(e||[])},w=e=>{p(a=>({...a,page:e.current,limit:e.pageSize}))};return s.useEffect(()=>{F()},[r.page,r.limit]),s.useEffect(()=>{N()},[i,o,n]),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex justify-between gap-4",children:b.map((e,a)=>t.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg cursor-pointer w-full",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("p",{className:"font-semibold text-lg",children:e.name}),t.jsx("div",{className:"rounded-full p-2",style:{background:e.bg},children:t.jsx(B,{size:15,color:e.color})})]}),t.jsx("p",{className:"font-bold text-3xl pt-7",children:e.value})]},a))}),t.jsxs(m,{spacing:4,mb:4,justifyContent:"space-between",children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsxs(m,{children:[t.jsx("label",{className:"text-xs",htmlFor:"",children:"From"}),t.jsx(f,{type:"date",value:i,onChange:e=>D(e.target.value),placeholder:"Start Date",size:"xs"})]}),t.jsxs(m,{children:[t.jsx("label",{className:"text-xs",htmlFor:"",children:"To"}),t.jsx(f,{type:"date",value:o,onChange:e=>j(e.target.value),placeholder:"End Date",size:"xs"})]})]}),t.jsx(z,{variant:"outline",size:"xs",colorScheme:"blue",children:t.jsx(I,{size:18})})]}),t.jsx(C,{data:y||[],columns:v,rowKey:"id",showExport:!1,showFilters:!0,tableHeaderBg:"#F1F4F9",tableHeaderColor:"black",loading:h,pagination:{current:r.page,pageSize:r.limit,total:r.total},onChange:w})]})};export{U as default};
